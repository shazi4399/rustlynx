//TODO LIST
//Write init, setting up context
//port the preprocessing phase